<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout :: layout('Reading ' + ${chapter.chapterName}, 'manga', ~{::section}, ~{::script})}">
    <body>
        <section class="flex-1 flex flex-col relative overflow-hidden bg-black">
            
            <header class="h-14 flex items-center justify-between px-4 bg-[#171022] border-b border-white/10 shrink-0 z-50">
                <div class="flex items-center gap-4">
                    <a th:href="@{/manga/{id}(id=${chapter.manga.id})}" class="text-gray-400 hover:text-white transition-colors flex items-center gap-1">
                        <span class="material-symbols-outlined">arrow_back</span> 
                        <span class="hidden sm:inline text-sm font-bold">Back</span>
                    </a>
                    <div class="flex flex-col">
                        <h2 class="text-sm font-bold text-white truncate max-w-[200px]" th:text="${chapter.manga.title}">Manga</h2>
                        <span class="text-xs text-primary font-bold" th:text="${chapter.chapterName}">Chapter</span>
                    </div>
                </div>
                
                <div class="text-xs text-gray-500">
                    <span th:text="${pages.size()}">0</span> pages
                </div>
            </header>

            <div class="flex-1 overflow-y-auto scroll-smooth custom-scrollbar flex flex-col items-center pb-20 bg-[#121212]">
                
                <div th:each="page : ${pages}" class="w-full max-w-3xl relative group">
                    <img th:src="@{/manga/image/{id}(id=${page.id})}" 
                         loading="lazy"
                         class="w-full h-auto block"
                         alt="Page Image">
                         
                    <div class="absolute top-2 right-2 bg-black/50 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity">
                        <span th:text="${page.pageOrder}">1</span>
                    </div>
                </div>

                <div class="w-full max-w-3xl p-8 flex justify-between items-center mt-4 border-t border-white/10">
                    <button class="px-4 py-2 rounded bg-white/10 text-white hover:bg-white/20">Prev Chapter</button>
                    <a th:href="@{/manga/{id}(id=${chapter.manga.id})}" class="px-4 py-2 rounded bg-primary text-white hover:bg-primary-dark font-bold">Manga Info</a>
                    <button class="px-4 py-2 rounded bg-white/10 text-white hover:bg-white/20">Next Chapter</button>
                </div>
                
            </div>
        </section>
        <script></script>
    </body>
</html>